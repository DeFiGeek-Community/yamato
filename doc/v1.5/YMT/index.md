# YMT Token

## 概要

YMT Tokenはインフレーションを伴う分配型トークンであり、時間経過とともに減少する発行率を特徴とします。このトークンはERC20規格に準拠し、ERC20Permitを拡張しています。

---

## イベント

### `UpdateMiningParameters`:

- **説明**: マイニングパラメータ（時刻、レート、供給量）が更新されたときにトリガーされるイベント。
- **パラメータ**:
  - `time`: 更新された時刻。
  - `rate`: 新しいマイニングレート。
  - `supply`: 更新された供給量。

### `SetMinter`:

- **説明**: ymtMinterアドレスが設定されたときに発生するイベント。
- **パラメータ**:
  - `ymtMinter`: ymtMinterのアドレス。

### `SetAdmin`:

- **説明**: 管理者アドレスが設定または更新されたときに発生するイベント。
- **パラメータ**:
  - `admin`: 新しい管理者のアドレス。

---

## 変数

### `ymtMinter: public(address)`

- **説明**: トークンを発行（mint）するためのアドレス。

### `admin: public(address)`

- **説明**: 管理者のアドレス。

### `miningEpoch: public(int128)`

- **説明**: 現在のマイニングエポック。

### `startEpochTime: public(uint256)`

- **説明**: 現在のエポックの開始時刻。

### `rate: public(uint256)`

- **説明**: 現在のマイニングレート。

### `startEpochSupply: public(uint256)`

- **説明**: 現在のエポックの開始時点での供給量。

---

## 関数

### `constructor(ymtVestingAddr: address)`

- **説明**: コントラクトのコンストラクタ。初期供給とベスティング供給を設定します。
- **パラメータ**:
  - `ymtVestingAddr`: ベスティング供給の受取先アドレス。

### `updateMiningParameters()`

- **説明**: マイニングパラメータを更新します。

### `startEpochTimeWrite()`

- **説明**: 現在のマイニングエポックの開始時刻を取得し、必要に応じてマイニングパラメータを更新します。

### `futureEpochTimeWrite()`

- **説明**: 次のマイニングエポックの開始時刻を取得し、必要に応じてマイニングパラメータを更新します。

### `availableSupply()`

- **説明**: 現在存在しているトークンの総数を返します。

### `mintableInTimeframe(start: uint256, end: uint256)`

- **説明**: 指定された時間枠で発行可能なトークンの量を計算します。
- **パラメータ**:
  - `start`: 時間枠の開始時刻。
  - `end`: 時間枠の終了時刻。

### `setMinter(_ymtMinter: address)`

- **説明**: ymtMinterアドレスを設定します。
- **パラメータ**:
  - `_ymtMinter`: 新しいymtMinterのアドレス。
- **アクセス制限**: 管理者のみ。


### `setAdmin(_admin: address)`

- **説明**: 新しい管理者を設定します。
- **パラメータ**:
  - `_admin`: 新しい管理者のアドレス。
- **アクセス制限**: 管理者のみ。

### `mint(_to: address, _value: uint256)`

- **説明**: 指定されたアドレスにトークンを発行（mint）します。
- **パラメータ**:
  - `_to`: トークンの受取人アドレス。
  - `_value`: 発行するトークンの量。
- **アクセス制限**: ymtMinterコントラクトのみ。

### `burn(_value: uint256)`

- **説明**: `msg.sender`が所有するトークンを焼却（burn）します。
- **パラメータ**:
  - `_value`: 焼却するトークンの量。


以下は、提供されたSolidityコード「YMT Token」のためのドキュメントです。このドキュメントは、非技術者が理解できるように作成され、コントラクトの主要な機能とメカニズムを詳細に説明します。

---

## コントラクトの詳細


### トークンのインフレーションとマイニング

YMTトークンのマイニングレートは、毎年10%の割合で減少します。この減少は、レート減少係数によって決定されます。具体的な減少割合を計算するには、初期レート、レート減少係数、およびレート分母を用いて、毎年の新しいレートを計算します。

#### マイニングレートの減少計算

- **初期レート**: 年間`55,000,000` YMT。
- **レート減少係数**: `1_111_111_111_111_111_111`。
- **レート分母**: `10^18`。

#### マイニングレートの減少計算

新しいマイニングレートの計算式は次の通りです:

$$
\text{新レート} = \frac{\text{現レート} \times \text{レート減少係数}}{\text{レート分母}}
$$

この式を用いて、各エポックにおける新しいマイニングレートを計算することができます。

#### 具体的な減少割合の計算

例として、最初の数年のレート減少を計算は以下の通りです。

1. **年1**: 初期レートは`55,000,000` YMT/年。
2. **年2**: 新レートは`55,000,000 * 1_111_111_111_111_111_111 / 10^18 = 49,166,666.667` YMT/年。
3. **年3**: 新レートは`49,166,666.667 * 1_111_111_111_111_111_111 / 10^18 = 43,703,703.704` YMT/年。
4. **年4**: 新レートは`43,703,703.704 * 1_111_111_111_111_111_111 / 10^18 = 39,259,259.259` YMT/年。

この計算により、毎年レートは約10%ずつ減少していくことがわかります。この減少は、マイニングレートを年々減少させ、トークンのインフレーションを時間と共に制御するために設計されています。

